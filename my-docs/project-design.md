
## 문서 목적

본 문서는 Music Trainer 프로젝트를 처음부터 다시 구축하기 위한 종합 설계 문서입니다. 기존 프로젝트에서 발생했던 테스트 문제를 바탕으로, **"테스트 통과 = 코드 완성"**이 되도록 하는 개발 프로세스와 품질 기준을 정의합니다.

**핵심 원칙**: 실제 동작을 검증하는 테스트가 통과해야만 기능이 완료된 것으로 간주합니다.

---

## 1. 프로젝트 개요

### 1.1 프로젝트 정의

본 프로젝트는 음악 연습을 위한 웹 기반 오디오 플레이어입니다.

**목표 사용자**: 악기 연주자, 음악 학습자, 음악 교육자

**핵심 가치**:
- 특정 구간을 반복하여 어려운 파트 집중 연습
- 속도를 늦춰 빠른 연주를 천천히 분석
- 피치를 조절하여 다른 키로 연습
- 음원을 악기별로 분리하여, 각 파트의 음량을 조절하여 합주 연습이 가능한 기능 지원 

---

## 2. 기능 및 워크플로우

### 2.1 핵심 기능 (Phase 1 - MVP)

#### 2.1.1 오디오 파일 로딩
- 드래그 앤 드롭 또는 파일 선택으로 로드, 또는 youtube url 입력시 mp3를 추출하여 로드.
- 지원 포맷: MP3, WAV, M4A, OGG
- 파일 메타데이터 표시 (제목, 재생 시간)

#### 2.1.2 기본 재생 컨트롤
- 재생 (Play)
- 일시정지 (Pause)
- 정지 (Stop)
- 탐색 (Seek) - 드래그 또는 클릭으로 이동

#### 2.1.3 파형 시각화
- 실시간 오디오 파형 표시
- 현재 재생 위치 표시 (플레이헤드)
- 파형 클릭으로 재생 위치 이동

#### 2.1.4 볼륨 제어
- 0~100% 범위 슬라이더
- 음소거 (Mute) 토글
- 볼륨 아이콘 상태 변화 (레벨별)

#### 2.1.5 A-B 루프 (구간 반복)
- A 포인트 설정 (시작점)
- B 포인트 설정 (종료점)
- 루프 활성화/비활성화
- 파형에 A-B 구간 하이라이트 표시

#### 2.1.6 키보드 단축키
- Space: 재생/일시정지
- Esc: 정지
- 좌/우 화살표: 1초 이동
- Shift + 좌/우: 10초 이동
- 상/하 화살표: 볼륨 5% 조절
- A, B: A, B 포인트 설정
- Q: A-B 루프 설정 시 A 포인트로 이동

### 2.2 고급 기능 (Phase 2)

#### 2.2.1 재생 속도 조절
- 범위: 0.5x ~ 2.0x (0.1x 단위)
- **피치 독립성**: 속도 변경 시 피치 유지 (Time Stretching)

#### 2.2.2 피치 조절
- 범위: -12 ~ +12 반음 (1 반음 단위)
- 속도와 독립적으로 작동

#### 2.2.3 오디오 플레이 시 주의사항
- 고급 기능이 적용되더라도 플레이시 버벅임 없어야함.

### 2.3 사용자 워크플로우

#### 2.3.1 기본 워크플로우
```
1. 파일 로드
   ↓
2. 파형 확인
   ↓
3. 전체 듣기 (재생)
   ↓
4. 연습 구간 설정 (A-B 포인트)
   ↓
5. 루프 활성화
   ↓
6. 속도 조절 (느리게)
   ↓
7. 반복 연습
   ↓
8. 속도 증가 (점진적)
   ↓
9. 원래 속도 도달
```

#### 2.3.2 고급 합주 기능 워크플로우

```
1. 파일 로드
   ↓
2. 파형 확인
   ↓
3. 악기별 음원 분리 요청
   ↓
4. 분리된 음원 재생 (파트별 볼륨 조절 가능)
   ↓
5. 연습 구간 설정 (A-B 포인트)
   ↓
6. 루프 활성화
   ↓
7. 속도 조절 (느리게)
   ↓
7. 반복 연습
   ↓
8. 속도 증가 (점진적)
   ↓
9. 원래 속도 도달
```

---

## 3. UI/UX 구현
- 수립된 기능 명세를 바탕으로 Pencil을 활용하여 UI/UX 구현
- UI/UX 테마는 각종 전문 음악 어플리케이션에 사용되는 테마를 참고하여 구현할 것. (예: Logic Pro, Ableton Live 등)
- UI/UX 구현이 제대로 됐는지 직접 Chrome 브라우저에서 확인

---

## 4.  프로젝트 설계 및 진행 시 반드시 고려해야할 사항
- 이 프로젝트를 위해 구축이 필요한 SKILLS가 있다면, 먼저 SKILLS를 구축하고 진행할 것. (@builder-skill agent 활용)
- 일반적인 테스트 통과가 실제 음원 플레이 기능을 담보하지 않으므로, 실제 음원 플레잉 및 화면에 표시되는 파형을 확인하는 테스트가 필요함. 
- 음원 플레이시 버벅임 현상이 없는 기술스택 구축 필요
- 향후 배포를 위한 아키텍처, 기술스택 제안 필요
- 음원 분리의 경우 Open Source를 활용하며, 서버의 GPU기능을 활용하지는 않을 것임. 처리속도가 그렇게 중요하지는 않음
- 기초 설계시 전체 기능 구현을 고려하여 설계할 것
- 단계별로 직접 구현 테스트가 가능하도록 Phase를 설계할 것

